{"version":3,"sources":["webpack:///./src/components/CustomerMessageTable.vue?47eb","webpack:///./src/components/CustomerMessageTable.vue?1ee4","webpack:///src/components/CustomerMessageTable.vue","webpack:///./src/components/CustomerMessageTable.vue?3244","webpack:///./src/components/CustomerMessageTable.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","columns","record","messageId","data","pagination","loading","clickRow","addRowClass","on","handleTableChange","scopedSlots","_u","key","fn","recvUser","_v","_s","addTime","Date","toLocaleString","content","domProps","text","name","query","$event","showDrawer","visible","onClose","drawerContent","recvEnt","staticRenderFns","component"],"mappings":"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","file":"js/chunk-7b3f8fd7.9975fc52.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerMessageTable.vue?vue&type=style&index=0&id=0469be64&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerMessageTable.vue?vue&type=style&index=0&id=0469be64&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-table',{staticClass:\"table-content\",attrs:{\"columns\":_vm.columns,\"row-key\":function (record) { return record.messageId; },\"data-source\":_vm.data,\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"customRow\":_vm.clickRow,\"rowClassName\":_vm.addRowClass},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"recvUser\",fn:function(recvUser){return [_c('span',{staticClass:\"table-content-span-ellipsis\",attrs:{\"title\":recvUser}},[_vm._v(\" \"+_vm._s(recvUser)+\" \")])]}},{key:\"addTime\",fn:function(addTime){return [_c('span',{attrs:{\"title\":new Date(addTime).toLocaleString()}},[_vm._v(\" \"+_vm._s(new Date(addTime).toLocaleString())+\" \")])]}},{key:\"content\",fn:function(content){return [_c('span',{domProps:{\"innerHTML\":_vm._s(content)}})]}},{key:\"operation\",fn:function(text, record){return [_c('router-link',{attrs:{\"to\":{name:'ScreenshotsToCustomer',query:{messageId:record.messageId}},\"target\":\"_blank\"}},[_vm._v(\" 截图给客户 \")]),_c('a',{staticClass:\"table-content-a\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.showDrawer(record)}}},[_vm._v(\"查看\")])]}}])}),_c('a-drawer',{attrs:{\"width\":\"640\",\"placement\":\"right\",\"closable\":true,\"visible\":_vm.visible},on:{\"close\":_vm.onClose}},[_c('a-row',[_c('a-col',{attrs:{\"span\":12}},[_c('p',{staticClass:\"drawer-item drawer-item-title\"},[_vm._v(\"接收人\")]),_c('p',{staticClass:\"drawer-item\"},[_vm._v(_vm._s(_vm.drawerContent.recvUser))])]),_c('a-col',{attrs:{\"span\":12}},[_c('p',{staticClass:\"drawer-item drawer-item-title\"},[_vm._v(\"接收企业\")]),_c('p',{staticClass:\"drawer-item\"},[_vm._v(_vm._s(_vm.drawerContent.recvEnt))])]),_c('a-col',{attrs:{\"span\":12}},[_c('p',{staticClass:\"drawer-item drawer-item-title\"},[_vm._v(\"发送时间\")]),_c('p',{staticClass:\"drawer-item\"},[_vm._v(_vm._s(new Date(_vm.drawerContent.addTime).toLocaleString()))])])],1),_c('a-divider'),_c('a-row',[_c('a-col',[_c('p',{staticClass:\"drawer-item drawer-item-title\"},[_vm._v(\"内容\")]),_c('p',{staticClass:\"drawer-item\",domProps:{\"innerHTML\":_vm._s(_vm.drawerContent.content)}})])],1),_c('a-divider')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <a-table\n                class=\"table-content\"\n                :columns=\"columns\"\n                :row-key=\"record => record.messageId\"\n                :data-source=\"data\"\n                :pagination=\"pagination\"\n                :loading=\"loading\"\n                :customRow=\"clickRow\"\n                :rowClassName=\"addRowClass\"\n                @change=\"handleTableChange\"\n        >\n            <template slot=\"recvUser\" slot-scope=\"recvUser\">\n        <span class=\"table-content-span-ellipsis\" :title=\"recvUser\">\n          {{ recvUser }}\n        </span>\n            </template>\n            <template slot=\"addTime\" slot-scope=\"addTime\">\n        <span :title=\"new Date(addTime).toLocaleString()\">\n          {{ new Date(addTime).toLocaleString() }}\n        </span>\n            </template>\n            <template slot=\"content\" slot-scope=\"content\">\n        <span v-html=\"content\">\n\n        </span>\n            </template>\n            <template slot=\"operation\" slot-scope=\"text, record\">\n                <router-link :to=\"{name:'ScreenshotsToCustomer',query:{messageId:record.messageId}}\" target=\"_blank\">\n                    截图给客户\n                </router-link>\n                <!--<a href=\"javascript:;\" class=\"table-content-a\">截图给客户</a>-->\n                <!--<a-popconfirm-->\n                <!--v-if=\"data.length\"-->\n                <!--title=\"Sure to delete?\"-->\n                <!--@confirm=\"() => onDelete(record.id.value)\"-->\n                <!--&gt;-->\n                <!--<a href=\"javascript:;\">删除</a>-->\n                <!--</a-popconfirm>-->\n                <a href=\"javascript:;\" class=\"table-content-a\" @click=\"showDrawer(record)\">查看</a>\n            </template>\n        </a-table>\n        <a-drawer width=\"640\" placement=\"right\" :closable=\"true\" :visible=\"visible\" @close=\"onClose\">\n            <a-row>\n                <a-col :span=\"12\">\n                    <p class=\"drawer-item drawer-item-title\">接收人</p>\n                    <p class=\"drawer-item\">{{ drawerContent.recvUser }}</p>\n                </a-col>\n                <a-col :span=\"12\">\n                    <p class=\"drawer-item drawer-item-title\">接收企业</p>\n                    <p class=\"drawer-item\">{{ drawerContent.recvEnt }}</p>\n                </a-col>\n                <a-col :span=\"12\">\n                    <p class=\"drawer-item drawer-item-title\">发送时间</p>\n                    <p class=\"drawer-item\">{{ new Date(drawerContent.addTime).toLocaleString() }}</p>\n                </a-col>\n            </a-row>\n            <a-divider/>\n            <a-row>\n                <a-col>\n                    <p class=\"drawer-item drawer-item-title\">内容</p>\n                    <p class=\"drawer-item\" v-html=\"drawerContent.content\"></p>\n                </a-col>\n            </a-row>\n            <a-divider/>\n        </a-drawer>\n    </div>\n</template>\n<script>\n\n    const columns = [\n        {\n            title: '内容',\n            dataIndex: 'content',\n            sorter: true,\n            width: '40%',\n            scopedSlots: {customRender: 'content'},\n        },\n        {\n            title: '接收人',\n            dataIndex: 'recvUser',\n            sorter: true,\n            width: '15%',\n            scopedSlots: {customRender: 'recvUser'},\n        },\n        {\n            title: '接收企业',\n            dataIndex: 'recvEnt',\n            width: '15%',\n            scopedSlots: {customRender: 'recvEnt'},\n        },\n        {\n            title: '发送时间',\n            dataIndex: 'addTime',\n            width: '15%',\n            scopedSlots: {customRender: 'addTime'},\n        },\n        {\n            title: '操作',\n            dataIndex: 'operation',\n            width: '15%',\n            scopedSlots: {customRender: 'operation'},\n        },\n    ];\n\n    export default {\n        name: 'CustomerMessageTable',\n        data() {\n            return {\n                console: false,\n                visible: false,\n                data: [],\n                pagination: {page: 1, current: 1},\n                loading: false,\n                columns,\n                selectedNo: \"\",\n                drawerContent: {\"recvEnt\": \"\", \"recvUser\": \"\", \"content\": \"\", \"addTime\": \"\"}\n            };\n        },\n        mounted() {\n            this.fetch();\n        },\n        methods: {\n            handleTableChange(pagination, filters, sorter) {\n                const pager = {...this.pagination};\n                pager.current = pagination.current;\n                this.pagination = pager;\n                this.fetch({\n                    results: pagination.pageSize,\n                    page: pagination.current,\n                    sortField: sorter.field,\n                    sortOrder: sorter.order,\n                    ...filters,\n                });\n            },\n            fetch() {\n                let message = \"\"\n                if (sessionStorage.getItem(\"message\")) {\n                    message = sessionStorage.getItem(\"message\") || \"\"\n                }\n                let params = {pageSize: 10, page: this.pagination.current, searchKey: message}\n                this.console && console.log('params:', params);\n                this.loading = true;\n                this.$api.getCustomerMessageList(params)\n                    .then((data) => {\n                        this.loading = false\n                        const pagination = {...this.pagination};\n                        pagination.total = data.data.data.count\n                        this.data = data.data.data.messageList\n                        this.pagination = pagination\n                        this.console && console.log(data)\n                    })\n                    .catch((err) => {\n                        console.log(err)\n                    })\n            },\n            onDelete(key) {\n                const data = [...this.data];\n                this.console && console.log(data, key)\n                // this.data = data.filter(item => item.id.value !== key);\n            },\n            showDrawer(value) {\n                this.visible = true;\n                this.drawerContent = value\n            },\n            onClose() {\n                this.visible = false;\n            },\n            clickRow(record) {\n                return {\n                    on: {\n                        click: () => {\n                            this.selectedNo = record.messageId\n                        }\n                    }\n                }\n            },\n            addRowClass(key) {\n                var styleClassName = \"\"\n                if (key.messageId === this.selectedNo) {\n                    styleClassName = \"selected-tr\"\n                }\n                return styleClassName\n            }\n        },\n    };\n</script>\n\n<style scoped>\n    .table-content {\n        min-width: 1104px;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerMessageTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerMessageTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomerMessageTable.vue?vue&type=template&id=0469be64&scoped=true&\"\nimport script from \"./CustomerMessageTable.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomerMessageTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CustomerMessageTable.vue?vue&type=style&index=0&id=0469be64&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0469be64\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}